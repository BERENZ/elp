# Wczytywanie i zapisywanie plików {#io}

<!-- csv better than many! -->
<!-- folder roboczy -->

## Folder roboczy

Folder roboczy (ang. *working directory*) to miejsce na dysku, w którym aktualnie pracujemy.
Folder roboczy można sprawdzić korzystając z funkcji `getwd()`:

```{r}
getwd()
```

Zmienić folder roboczy można za pomocą skrótu *Ctrl+Shift+H* w RStudio (inaczej *Session -> Set Working Directory -> Choose Directory..*) lub też funkcji `setwd()`:

```{r, eval=FALSE}
setwd("home/jakub/Documents/elp/") #unix
setwd("C:/Users/jakub/Documenty/elp/") #windows
```

```{block2 type="rmdinfo"}
Ustawienie folderu roboczego ma też miejsce przy tworzeniu nowego lub otwieraniu istniejącego projektu RStudio.
```

Folder roboczy jest ważny ponieważ pozwala na korzystanie z względnej ścieżki.
Ścieżka względna oznacza określanie ścieżki pliku w odniesieniu do istniejącego folderu roboczego, podczas, gdy ścieżka bezwzględna opisuje pełne położenie pliku.
Przykładowo, mamy plik `dane_meteo.csv`, którego pełna ścieżka to `home/jakub/Documents/elp/pliki/dane_meteo.csv`.
Z poziomu R ten plik jest widoczny zarówno jako `home/jakub/Documents/elp/pliki/dane_meteo.csv`, ale też w postaci `pliki/dane_meteo.csv`^[Jeżeli poprawnie ustawiliśmy folder roboczy.].
Używanie ścieżek względnych jest rekomendowane, ponieważ znacząco upraszcza pracę, gdy dane/obliczenia przenosi się pomiędzy różnymi komputerami lub gdy współpracuje się z innymi osobami.

<!--project-oriented workflow -->
<!-- Adopt a project-oriented workflow -->
<!-- How? -->
<!-- • dedicated directory -->
<!-- • RStudio Project -->
<!-- • Git repo, probably syncing to a remote -->
<!-- + use a blank slate, restart often -->
<!-- footnote with fs and here pacakges -->

## Wczytywanie plików tekstowych

`"pliki/dane_meteo.csv"`

```{r, echo=FALSE}
m = readLines("pliki/dane_meteo.csv", n = 5)
m
```

```{r}
meteo = read.csv("pliki/dane_meteo.csv", stringsAsFactors = FALSE)
str(meteo)
```

`read.csv()` `read.csv2()`

```{r}
meteo = read.table("pliki/dane_meteo.csv", 
                   sep = ",",
                   header = TRUE)
str(meteo)
```

```{r}
meteo_pzn = subset(meteo, nazwa_stacji == "POZNAŃ")
str(meteo_pzn)
```

```{r, eval=FALSE}
write.csv(meteo, "pliki/dane_meteo_pzn.csv", row.names = FALSE)
```

```{block2 type="rmdinfo"}
Funkcje `read.csv()` czy `write.csv()` są domyślnie dostępne w języku R.
Ich wydajność nie jest niestety najlepsza w przypadku plików tekstowych o dużej wielkości.
W takich przypadkach warto użyć alternatywnych funkcji, np. `read_csv()` i `write_csv()` z pakietu **readr** lub `fread()` i `fwrite()` z pakietu **data.table**.
```

## Zapisywanie plików tekstowych

## Inne formaty

## Zadania
