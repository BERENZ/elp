# Funkcje {#funkcje}

<!-- intro (co to) -->

## Struktura funkcji

```{r, echo=FALSE}
knitr::include_graphics("images/funkcje.png")
```

## Wbudowane funkcje

```{r}
x = c(8.2, 10.3, 12.0)
```

```{r}
mean(x)
```

```{r}
(8.2 + 10.3 + 12.0) / 3
```

```{r}
sum(x) / length(x)
```

```{r}
y = mean(x)
```

## Dokumentacja

<!-- - użycie dokumentacji -->
F1

```{r, eval=FALSE}
?mean
```

Dokumentacja każdej funkcji, zwana inaczej plikiem pomocy, ma zazwyczaj podobną strukturę.

- W lewym górnym rogu znajduje się nazwa funkcji (`mean`) oraz nazwa pakietu z którego dana funkcja pochodzi (`base`)
- Poniżej znajduje się tytuł funkcji oraz jej krótki opis
- Kolejnym elementem jest budowa funkcji (*Usage*), która skrótowo opisuje z jakich argumentów składa się dana funkcja.
Np. funkcja `mean()` przyjmuje argument `x`, `trim`, oraz `na.rm`. 
Dla argumentów `trim` oraz `na.rm` są także ustalone ich domyślne wartości.
Dodatkowo, widoczny jest argument w postaci wielokropka (`...`). 
<!--!?-->
- Argumenty funkcji są również wypisane oraz skrótowo wyjaśnione. 
Przykładowo, `x` musi być obiektem R o typie numerycznym (który łączy typ liczb całkowitych i zmiennoprzecinkowych<!--ref-->), logicznym, `date`, `date-time`, lub `time interval`.
- Część *Value* (lub *Details*) opisuje szczegóły wykonywanej funkcji
- Inne możliwe elementy to np. *References* odnoszący się do artykułu czy książki opisującej daną funkcję lub metodę, czy też *See also* zawierający odnośniki do innych, podobnych funkcji
- Jeden z najważniejszych elementów pliku pomocy znajduje się na samym końcu - są to przykłady (*Examples*).
Jeżeli nie jesteśmy pewni jak dana funkcja działa warto zacząć od skopiowania przykładów a następnie ich wykonania.

<!-- block - nie bój się szukać online -->

## Pakiety

Pakiet to zorganizowany zbiór funkcji, który rozszerza możliwości R.
<!-- przykłady -->
Pakiety oprócz kodu zawierają szereg dodatkowych istotnych elementów, takich jak:

- Informacje o twórcach, zależnościach, licencji
- Dokumentację
- Przykładowe dane
- Testy kodu

<!-- - pakiety -->
<!-- co to -->
<!-- jak zainstalować -->
<!-- przykłady -->

Do instalacji pakietu w R służy funkcja `install.packages()`, np:

Podobnie jak instalowanie programów na komputerze - robimy to tylko jeden raz.

Użycie wybranego pakietu wymaga dołączenia go do R za pomocą funkcji `library()`.
Dołączenie wybranych pakietów do R robimy po każdym uruchomieniu R.
<!-- Oficjalne repo -->
<!-- info o github + przykład -->

<!-- block - inaczej biblioteki, moduły, etc -->

## Tworzenie skryptów

## Budowanie funkcji

Formalnie funkcja składa się z trzech elementów: listy argumentów (ang. *formals*), ciała funkcji (ang. *body*) oraz środowiska (ang. *environment*).
Pierwsze dwa elementy ustala twórca funkcji, natomiast środowisko jest określane na podstawie tego, gdzie dana funkcja została zdefiniowana^[footnote o environment]<!--https://rstudio-education.github.io/hopr/environments.html-->.
Dodatkowo funkcja ma swoją nazwę.

```{r}
moja_funkcja = function(x, y, z){
  pod = y / z
  wynik = x * pod
  wynik
}
```

<!-- wynik vs return(wynik) -->

```{r}
formals(moja_funkcja)
```

```{r}
body(moja_funkcja)
```

```{r}
environment(moja_funkcja)
```

<!-- F - 32 / 1.8000 -->

```{r}
pogoda = function(temperatura_f){
    (temperatura_f - 32) / 1.8
}
pogoda(75)
pogoda(110)
pogoda(0)
```

<!-- scripts vs functions? -->
<!-- when to write a function? -->
<!-- more than two repetition -->

### Komunikaty

Oprócz wyniku danej operacji R może wyświetlić kilka rodzajów wiadomości.
<!-- with examples-->
<!-- - błędy/ostrzeżenia -->
<!-- rodzaje błędów - http://jarekj.home.amu.edu.pl/wp-content/uploads/2018/10/006_wyjatki.html -->
<!-- - komentarze -->
<!-- - czytelność kodu/ styl -->
<!-- wersje R -->

## Zadania

1. Zobacz jak wygląda plik pomocy funkcji `mean()`.
Wykonaj zawarte w nim przykłady.
Co zostało w nich wykonane?
<!-- zadania w stylu - skąd error? -->
